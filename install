#!/bin/bash

# If the --init flag is set, this is a new system and we need to get all dependencies. 
if [[ $* == *--init* ]]
  then
    # Get all required packages from the arch package databases and install them
    sudo aura -Sy awesome wicd wicd-gtk gvim alsa-utils pulseaudio lxdm
    # Get all required packages from the AUR
    sudo aura -Ay otf-droidsansmono-powerline-git vim-pathogen blueman
    # Update submodules
    cd $PWD
    git submodule update --init
fi


# Remove any existing versions of the files

# Awesome WM Config
rm -Rf ~/.config/awesome

# .bashrc
rm -f ~/.bashrc

# .xprofile
rm -f ~/.xprofile

# .Xresources
rm -f ~/.Xresources

# vim
rm -f ~/.vimrc
rm -Rf ~/.vim

# jshint
rm -f ~/.jshintrc

# Symlink to the new files

# Awesome WM Config
ln -s $PWD/awesome/ ~/.config/awesome

# .bashrc
ln -s $PWD/bash/bashrc ~/.bashrc

# .xprofile
ln -s $PWD/x/xprofile ~/.xprofile

# .Xresources
ln -s $PWD/x/Xresources ~/.Xresources

# vim
ln -s $PWD/vim/vimrc ~/.vimrc
ln -s $PWD/vim/vim ~/.vim

# jshint
ln -s $PWD/jshintrc ~/.jshintrc
